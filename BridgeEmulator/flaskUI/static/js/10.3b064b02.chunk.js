(this.webpackJsonpdiyhue=this.webpackJsonpdiyhue||[]).push([[10],{91:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return f}));var n=c(13),a=c(1),s=c(15),i=c.n(s),r=c(83),o=c(10),l=c(5),u=function(e){var t=e.api_key,c=e.groupId,a=e.scenes;return Object(l.jsxs)(l.Fragment,{children:[Object.entries(a).filter((function(e){return e[1].group===c})).map((function(e){var c=Object(n.a)(e,2),a=c[0],s=c[1];return Object(l.jsx)("div",{className:"sceneContainer",onClick:function(){return function(e){i.a.put("/api/".concat(t,"/groups/0/action"),{scene:e})}(a)},children:Object(l.jsx)("p",{style:{color:"#ccc"},children:s.name})},a)})),Object(l.jsx)("div",{className:"clear"})]})};function j(e,t,c){void 0===c&&(c=254);var n=1-e-t,a=(c/254).toFixed(2),s=a/t*e,i=a/t*n,r=1.656492*s-.354851*a-.255038*i,o=.707196*-s+1.655397*a+.036152*i,l=.051713*s-.121364*a+1.01153*i;return r>l&&r>o&&r>1?(o/=r,l/=r,r=1):o>l&&o>r&&o>1?(r/=o,l/=o,o=1):l>r&&l>o&&l>1&&(r/=l,o/=l,l=1),r=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055,o=o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055,l=l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055,r=Math.round(255*r),o=Math.round(255*o),l=Math.round(255*l),isNaN(r)&&(r=0),isNaN(o)&&(o=0),isNaN(l)&&(l=0),"rgba("+Math.floor(r)+","+Math.floor(o)+","+Math.floor(l)+",1)"}function d(e){var t,c,n,a=2e4/e;return a<=66?(t=255,c=99.4708025861*Math.log(a)-161.1195681661,n=a<=19?0:138.5177312231*Math.log(a-10)-305.0447927307):(t=329.698727446*Math.pow(a-60,-.1332047592),c=288.1221695283*Math.pow(a-60,-.0755148492),n=255),t=t>255?255:t,c=c>255?255:c,n=n>255?255:n,"rgba("+Math.floor(t)+","+Math.floor(c)+","+Math.floor(n)+",1)"}function h(e,t,c){var n=.664511*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.154324*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.162028*(c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92),a=.283881*e+.668433*t+.047685*c,s=88e-6*e+.07231*t+.986039*c,i=(n/(n+a+s)).toFixed(4),r=(a/(n+a+s)).toFixed(4);return isNaN(i)&&(i=0),isNaN(r)&&(r=0),[parseFloat(i),parseFloat(r)]}var b=function(e){var t=e.api_key,c=e.id,s=e.light,r=function(e){console.log("Apply state "+JSON.stringify(e)),i.a.put("/api/".concat(t,"/lights/").concat(c,"/state"),e)},u=Object(a.useState)(s.state),h=Object(n.a)(u,2),b=h[0];h[1];return Object(l.jsxs)("div",{className:"lightContainer ".concat(b.on?"textDark":"textLight"),style:{background:"xy"===b.colormode?j(b.xy[0],b.xy[1],254):"ct"===b.colormode?d(b.ct):"linear-gradient(90deg, rgba(255,212,93,1))"},children:[Object(l.jsx)("div",{className:"iconContainer",children:Object(l.jsx)(o.i,{})}),Object(l.jsx)("div",{className:"textContainer",children:Object(l.jsx)("p",{children:s.name})}),Object(l.jsx)("div",{className:"switchContainer",children:Object(l.jsxs)("label",{className:"switch",children:[Object(l.jsx)("input",{type:"checkbox",defaultChecked:b.on,onChange:function(e){return r({on:e.currentTarget.checked})}}),Object(l.jsx)("span",{className:"slider"})]})}),Object(l.jsx)("div",{className:"slideContainer",children:Object(l.jsx)("input",{type:"range",min:"1",max:"254",defaultValue:"50",className:"slider",onChange:function(e){return r({bri:e.currentTarget.value})}})})]})},g=c(84);function p(e){var t=e.api_key,c=e.lights,s=e.groupLights,o=Object(a.useRef)(null),u=Object(a.useRef)(null),d=Object(a.useState)(!0),b=Object(n.a)(d,2),p=b[0],O=b[1];Object(a.useEffect)((function(){return O(!1),function(){O(!1)}}),[]);var f,x=[],v=Object(r.a)(s.entries());try{for(v.s();!(f=v.n()).done;){var m=Object(n.a)(f.value,2),y=(m[0],m[1]);"xy"in c[y].state&&x.push(j(c[y].state.xy[0],c[y].state.xy[1],254))}}catch(k){v.e(k)}finally{v.f()}var N=function(e){var c=e.rgb;console.log(e.rgb),console.log("Apply state "+JSON.stringify(e)),i.a.put("/api/".concat(t,"/lights/").concat(s[e.index],"/state"),{xy:h(c.r,c.g,c.b)})};return Object(a.useEffect)((function(){o.current&&!u.current&&(u.current=new g.a.ColorPicker(o.current,{layout:[{component:g.a.ui.Wheel,options:{}}],colors:x}),u.current.on("input:end",N))}),[o.current]),Object(l.jsx)("div",{ref:o,className:p?"hide":"show"})}var O=function(e){var t=e.api_key,c=e.id,s=e.group,h=e.lights,g=e.scenes,O=Object(a.useState)("closed"),f=Object(n.a)(O,2),x=f[0],v=f[1],m=Object(a.useState)(s.state.any_on),y=Object(n.a)(m,2),N=y[0],k=y[1],C=Object(a.useState)(s.action.bri),M=Object(n.a)(C,2),w=(M[0],M[1]);return Object(l.jsxs)("div",{className:"groupContainer ".concat(s.state.any_on?"textDark":"textLight"," ").concat("closed"!==x?"expanded":""),style:function(){if(s.state.any_on){var e,t="linear-gradient(90deg, ",c=100/s.lights.length,a=Object(r.a)(s.lights.entries());try{for(a.s();!(e=a.n()).done;){var i=Object(n.a)(e.value,2),o=i[0],l=i[1];"xy"===h[l].state.colormode?(1===s.lights.length&&(t+="rgba(200,200,200,1) 0%,"),t=t+j(h[l].state.xy[0],h[l].state.xy[1],254)+" "+Math.floor(c*(o+1))+"%,"):"ct"===h[l].state.colormode?(1===s.lights.length&&(t+="rgba(200,200,200,1) 0%,"),t=t+d(h[l].state.ct)+" "+Math.floor(c*(o+1))+"%,"):(1===s.lights.length&&(t+="rgba(200,200,200,1) 0%,"),t=t+"rgba(255,212,93,1) "+Math.floor(c*(o+1))+"%,")}}catch(u){a.e(u)}finally{a.f()}return{background:t.slice(0,-1)+")"}}}(),children:["closed"!==x&&Object(l.jsxs)("div",{className:"header",children:[Object(l.jsxs)("div",{onClick:function(){return v("closed")},children:[Object(l.jsx)("div",{className:"icon",children:Object(l.jsx)(o.c,{})}),Object(l.jsx)("div",{className:"text",children:"close"})]}),Object(l.jsx)("div",{className:"tab ".concat("lights"===x?"active":""),onClick:function(){return v("lights")},children:Object(l.jsx)(o.k,{})}),Object(l.jsx)("div",{className:"tab ".concat("scenes"===x?"active":""),onClick:function(){return v("scenes")},children:Object(l.jsx)(o.l,{})}),Object(l.jsx)("div",{className:"tab ".concat("colorPicker"===x?"active":""),onClick:function(){return v("colorPicker")},children:Object(l.jsx)(o.o,{})})]}),Object(l.jsx)("div",{className:"overlayBtn",onClick:function(){return v("colorPicker")}}),Object(l.jsx)("div",{className:"iconContainer",children:Object(l.jsx)(o.e,{})}),Object(l.jsx)("div",{className:"textContainer",children:Object(l.jsx)("p",{children:s.name})}),Object(l.jsx)("div",{className:"switchContainer",children:Object(l.jsxs)("label",{className:"switch",children:[Object(l.jsx)("input",{type:"checkbox",value:N,checked:s.state.any_on,onChange:function(e){return function(e){var n={on:e};k(e),s.state.any_on=e,console.log("Apply state "+JSON.stringify(n)),i.a.put("/api/".concat(t,"/groups/").concat(c,"/action"),n)}(e.target.checked)}}),Object(l.jsx)("span",{className:"slider"})]})}),Object(l.jsx)("div",{className:"slideContainer",children:Object(l.jsx)("input",{type:"range",min:"1",max:"254",value:s.action.bri,step:"1",className:"slider",onChange:function(e){return function(e){var n={bri:e};w(e),s.action.bri=e,console.log("Apply state "+JSON.stringify(n)),i.a.put("/api/".concat(t,"/groups/").concat(c,"/action"),n)}(e.target.value)}})}),Object(l.jsxs)("div",{className:"dimmer",children:["scenes"===x&&Object(l.jsx)(u,{api_key:t,groupId:c,scenes:g}),"lights"===x&&Object(l.jsx)("div",{className:"lightsContainer",children:s.lights.map((function(e){return Object(l.jsx)(b,{api_key:t,id:e,light:h[e]},e)}))}),"colorPicker"===x&&Object(l.jsx)(p,{api_key:t,lights:h,groupLights:s.lights})]})]})};function f(e){var t=e.API_KEY,c=Object(a.useState)({config:{},lights:{},groups:{},scenes:{}}),s=Object(n.a)(c,2),r=s[0],o=s[1],u=function(){void 0!==t&&i.a.get("/api/".concat(t)).then((function(e){console.log(e.data),o(e.data)})).catch((function(e){console.error(e)}))};return Object(a.useEffect)((function(){u();var e=setInterval((function(){u()}),2e3);return function(){return clearInterval(e)}}),[t]),Object(l.jsx)("div",{className:"content",children:Object(l.jsx)("div",{className:"cardGrid",children:Object.entries(r.groups).filter((function(e){return"Entertainment"!==e[1].type})).map((function(e){var c=Object(n.a)(e,2),a=c[0],s=c[1];return Object(l.jsx)(O,{api_key:t,id:a,group:s,lights:r.lights,scenes:r.scenes},a)}))})})}}}]);
//# sourceMappingURL=10.3b064b02.chunk.js.map