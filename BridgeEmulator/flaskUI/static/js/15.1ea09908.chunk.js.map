{"version":3,"sources":["containers/Flash.js","containers/Device.js","views/Devices.js"],"names":["Flash","type","message","duration","setType","persistOnHover","className","onClick","Device","HOST_IP","api_key","id","device","setMessage","deleteDevice","axios","delete","then","fetchedData","catch","error","console","battery","battryLevel","title","batteryLevel","defaultChecked","onChange","e","state","currentTarget","checked","put","on","confirmAlert","buttons","label","Devices","API_KEY","useState","devices","setDevices","useEffect","fetchDevices","undefined","get","log","data","interval","setInterval","clearInterval","Object","entries","map"],"mappings":"mGAAA,uEAGe,SAASA,EAAT,GAAsD,IAArCC,EAAoC,EAApCA,KAAMC,EAA8B,EAA9BA,QAASC,EAAqB,EAArBA,SAAUC,EAAW,EAAXA,QACvD,OACE,cAAC,IAAD,CAAcD,SAAUA,EAAUE,gBAAgB,EAAlD,SACE,qBAAKC,UAAU,wBAAf,SACE,sBAAKA,UAAS,uBAAkBL,GAAhC,UACE,4BAAIC,IACJ,qBAAKI,UAAU,OAAf,SACE,cAAC,IAAD,CAASC,QAAS,kBAAMH,EAAQ,sB,8HC4G7BI,EAzGA,SAAC,GAA2D,IAAzDC,EAAwD,EAAxDA,QAASC,EAA+C,EAA/CA,QAASC,EAAsC,EAAtCA,GAAIC,EAAkC,EAAlCA,OAAQR,EAA0B,EAA1BA,QAASS,EAAiB,EAAjBA,WAiBjDC,EAAe,WACnBC,IACGC,OADH,UACaP,EADb,gBAC4BC,EAD5B,oBAC+CC,IAC5CM,MAAK,SAACC,GAELL,EAAW,+BACXT,EAAQ,QACRA,EAAQ,cAETe,OAAM,SAACC,GACNC,QAAQD,MAAMA,GACdP,EAAW,wCACXT,EAAQ,QACRA,EAAQ,aAsCd,OACE,sBAAKE,UAAU,cAAf,UACE,sBAAKA,UAAU,OAAf,UACE,qBAAKA,UAAU,OAAf,SACE,cAAC,IAAD,MAEF,qBAAKA,UAAU,OAAf,SAAuBM,EAAM,UAE/B,qBAAKN,UAAU,OAAf,SACE,sBAAKA,UAAU,OAAf,UACG,YAAaM,EAAM,QAzBP,WACnB,IAAIU,EAAUV,EAAM,OAAN,QACVW,EAAcD,EAAU,IAE5B,OAAIA,EAAU,GACL,cAAC,IAAD,CAAeE,MAAOD,IACpBD,EAAU,GACZ,cAAC,IAAD,CAAeE,MAAOD,IACpBD,EAAU,GACZ,cAAC,IAAD,CAAcE,MAAOD,IAErB,cAAC,IAAD,CAAcC,MAAOD,IAcUE,GADpC,YAEYb,EAAM,QAFlB,IAE+B,uBAF/B,SAGSA,EAAM,KAHf,IAGyB,uBAHzB,aAIaA,EAAM,SAJnB,IAIiC,4BAGnC,sBAAKN,UAAU,OAAf,UACE,qBAAKA,UAAU,aAAkB,IAEjC,qBAAKA,UAAU,kBAAf,SACE,wBAAOA,UAAU,SAAjB,UACE,uBACEL,KAAK,WACLyB,eAAgBd,EAAM,OAAN,GAChBe,SAAU,SAACC,GAAD,OA1DAC,EA0DoBD,EAAEE,cAAcC,aAzDxDhB,IACGiB,IADH,UACUvB,EADV,gBACyBC,EADzB,oBAC4CC,EAD5C,WACyD,CAAEsB,GAAIJ,IAC5DZ,MAAK,SAACC,GAELL,EACED,EAAM,KAAW,kBAAoBiB,EAAQ,UAAY,aAE3DzB,EAAQ,QACRA,EAAQ,cAETe,OAAM,SAACC,GACNC,QAAQD,MAAMA,GACdP,EAAW,wCACXT,EAAQ,QACRA,EAAQ,YAfO,IAACyB,KA4DZ,sBAAMvB,UAAU,gBAGpB,qBAAKA,UAAU,UAAf,SACE,cAAC,IAAD,CAAiBkB,MAAM,SAASjB,QAAS,WAhG/C2B,uBAAa,CACXV,MAAO,iBAAmBZ,EAAM,KAChCV,QAAS,2BACTiC,QAAS,CACP,CACEC,MAAO,MACP7B,QAAS,kBAAMO,MAEjB,CACEsB,MAAO,qB,SC2CFC,UA7DC,SAAC,GAA0B,IAAxB5B,EAAuB,EAAvBA,QAAS6B,EAAc,EAAdA,QAC1B,EAA8BC,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAwBF,mBAAS,QAAjC,mBAAOtC,EAAP,KAAaG,EAAb,KACA,EAA8BmC,mBAAS,cAAvC,mBAAOrC,EAAP,KAAgBW,EAAhB,KAwBA,OAtBA6B,qBAAU,WACR,IAAMC,EAAe,gBACHC,IAAZN,GACFvB,IACG8B,IADH,UACUpC,EADV,aAEGQ,MAAK,SAACC,GACLG,QAAQyB,IAAI5B,EAAY6B,MACxBN,EAAWvB,EAAY6B,SAExB5B,OAAM,SAACC,GACNC,QAAQD,MAAMA,OAKtBuB,IACA,IAAMK,EAAWC,aAAY,WAC3BN,MACC,KACH,OAAO,kBAAMO,cAAcF,MAC1B,CAACvC,EAAS6B,IAGX,qBAAKhC,UAAU,UAAf,SACE,qBAAKA,UAAU,QAAf,SACE,sBAAKA,UAAU,kBAAf,UAEQ,SAATL,GACC,cAACD,EAAA,EAAD,CACEC,KAAMA,EACNC,QAASA,EACTC,SAAS,OACTC,QAASA,IAGb,qBAAKE,UAAU,aAAf,SACG6C,OAAOC,QAAQZ,GAASa,KAAI,mCAAE1C,EAAF,KAAMC,EAAN,WACJ,SAAvBA,EAAM,UACN,cAAC,EAAD,CAEEH,QAASA,EACTC,QAAS4B,EACT3B,GAAIA,EACJC,OAAQA,EACRR,QAASA,EACTS,WAAYA,GANPF","file":"static/js/15.1ea09908.chunk.js","sourcesContent":["import { FaTimes } from \"react-icons/fa\";\nimport FlashMessage from \"react-flash-message\";\n\nexport default function Flash({ type, message, duration, setType }) {\n  return (\n    <FlashMessage duration={duration} persistOnHover={true}>\n      <div className=\"notificationContainer\">\n        <div className={`notification ${type}`}>\n          <p>{message}</p>\n          <div className=\"icon\">\n            <FaTimes onClick={() => setType(\"none\")} />\n          </div>\n        </div>\n      </div>\n    </FlashMessage>\n  );\n}\n","import { MdDeleteForever } from \"react-icons/md\";\nimport { FaMagic } from \"react-icons/fa\";\nimport {\n  TiBatteryLow,\n  TiBatteryMid,\n  TiBatteryHigh,\n  TiBatteryFull,\n} from \"react-icons/ti\";\n\nimport axios from \"axios\";\nimport { confirmAlert } from \"react-confirm-alert\"; // Import\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; // Import css\n\nconst Device = ({ HOST_IP, api_key, id, device, setType, setMessage }) => {\n  const deleteAlert = () => {\n    confirmAlert({\n      title: \"Delete device \" + device[\"name\"],\n      message: \"Are you sure to do this?\",\n      buttons: [\n        {\n          label: \"Yes\",\n          onClick: () => deleteDevice(),\n        },\n        {\n          label: \"No\",\n        },\n      ],\n    });\n  };\n\n  const deleteDevice = () => {\n    axios\n      .delete(`${HOST_IP}/api/${api_key}/sensors/${id}`)\n      .then((fetchedData) => {\n        //console.log(fetchedData.data);\n        setMessage(\"Device successfully deleted\");\n        setType(\"none\");\n        setType(\"success\");\n      })\n      .catch((error) => {\n        console.error(error);\n        setMessage(\"Error occured, check browser console\");\n        setType(\"none\");\n        setType(\"error\");\n      });\n  };\n\n  const toggleDevice = (state) => {\n    axios\n      .put(`${HOST_IP}/api/${api_key}/sensors/${id}/config`, { on: state })\n      .then((fetchedData) => {\n        //console.log(fetchedData.data);\n        setMessage(\n          device[\"name\"] + \" successfully \" + (state ? \"enabled\" : \"disabled\")\n        );\n        setType(\"none\");\n        setType(\"success\");\n      })\n      .catch((error) => {\n        console.error(error);\n        setMessage(\"Error occured, check browser console\");\n        setType(\"none\");\n        setType(\"error\");\n      });\n  };\n\n  const batteryLevel = () => {\n    let battery = device[\"config\"][\"battery\"];\n    let battryLevel = battery + \"%\";\n    //console.log(battery);\n    if (battery > 90) {\n      return <TiBatteryFull title={battryLevel} />;\n    } else if (battery > 70) {\n      return <TiBatteryHigh title={battryLevel} />;\n    } else if (battery > 40) {\n      return <TiBatteryMid title={battryLevel} />;\n    } else {\n      return <TiBatteryLow title={battryLevel} />;\n    }\n  };\n\n  return (\n    <div className=\"card device\">\n      <div className=\"row1\">\n        <div className=\"icon\">\n          <FaMagic />\n        </div>\n        <div className=\"text\">{device[\"name\"]}</div>\n      </div>\n      <div className=\"row2\">\n        <div className=\"text\">\n          {\"battery\" in device[\"config\"] && batteryLevel()}\n          ModelID: {device[\"modelid\"]} <br />\n          Type: {device[\"type\"]} <br />\n          Protocol: {device[\"protocol\"]} <br />\n        </div>\n      </div>\n      <div className=\"row3\">\n        <div className=\"dropdown\"></div>{\" \"}\n        {/* replace with dropdown form, (styling missing)*/}\n        <div className=\"switchContainer\">\n          <label className=\"switch\">\n            <input\n              type=\"checkbox\"\n              defaultChecked={device[\"config\"][\"on\"]}\n              onChange={(e) => toggleDevice(e.currentTarget.checked)}\n            />\n            <span className=\"slider\"></span>\n          </label>\n        </div>\n        <div className=\"btn red\">\n          <MdDeleteForever title=\"Delete\" onClick={() => deleteAlert()} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Device;\n","import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Device from \"../containers/Device\";\nimport Flash from \"../containers/Flash\";\n\n\nconst Devices = ({ HOST_IP, API_KEY }) => {\n  const [devices, setDevices] = useState({});\n  const [type, setType] = useState(\"none\");\n  const [message, setMessage] = useState(\"no message\");\n\n  useEffect(() => {\n    const fetchDevices = () => {\n      if (API_KEY !== undefined) {\n        axios\n          .get(`${HOST_IP}/sensors`)\n          .then((fetchedData) => {\n            console.log(fetchedData.data);\n            setDevices(fetchedData.data);\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n      }\n    };\n\n    fetchDevices();\n    const interval = setInterval(() => {\n      fetchDevices();\n    }, 2000); // <<-- ⏱ 1000ms = 1s\n    return () => clearInterval(interval);\n  }, [HOST_IP, API_KEY]);\n\n  return (\n    <div className=\"content\">\n      <div className=\"inner\">\n        <div className=\"devicecontainer\">\n            \n      {type !== \"none\" && (\n        <Flash\n          type={type}\n          message={message}\n          duration=\"5000\"\n          setType={setType}\n        />\n      )}\n      <div className=\"devicecard\">\n        {Object.entries(devices).map(([id, device]) => (\n          device[\"protocol\"] !== \"none\" &&\n          <Device\n            key={id}\n            HOST_IP={HOST_IP}\n            api_key={API_KEY}\n            id={id}\n            device={device}\n            setType={setType}\n            setMessage={setMessage}\n          />\n        ))}\n      </div>\n    </div>\n    </div>\n\n    </div>\n  );\n};\n\nexport default Devices;\n"],"sourceRoot":""}