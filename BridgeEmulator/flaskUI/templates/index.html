<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0" />
  <title>DIY Hue Light</title>


  <link href="/static/assets/style.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/assets/bootstrap-4.6.0-dist/css/bootstrap.min.css">
  <link href='https://fonts.googleapis.com/css?family=Lato:400,300' rel='stylesheet' type='text/css'>


  <link rel="stylesheet" href="/static/assets/fontawesome-free-5.15.1-web/css/fontawesome.min.css">
  <link rel="stylesheet" href="/static/assets/fontawesome-free-5.15.1-web/css/all.min.css">




  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
  <script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="/static/assets/bootstrap-4.6.0-dist/js/bootstrap.bundle.min.js"></script>
  <script src="/static/assets/script.js"></script>

  <div class="flexContainer">
    <div class="sidebar">
      <ul>
        <li class="iconBox"><img src="/static/assets/images/logo.svg"></li>
        <a href="#home">
          <li><i class="fas fa-home" style="color: #0092FF"></i>Home</li>
        </a>
        <a href="#bridge">
          <li><i class="fas fa-cube" style="color: #FF9E00"></i>Bridge</li>
        </a>
        <a href="#devices">
          <li><i class="fas fa-braille" style="color: #764600"></i>Devices</li>
        </a>
        <a href="#deconz">
          <li><i class="fab fa-dyalog" style="color: #42A138"></i>Deconz</li>
        </a>
        <a href="#MQTT">
          <li><i class="fas fa-cube" style="color: #0084FF"></i>MQTT</li>
        </a>
        <a href="#alerts">
          <li><i class="fas fa-exclamation-triangle" style="color: #AE2D00"></i>Alerts</li>
        </a>
        <a href="#settings">
          <li><i class="fas fa-cog" style="color: #8B00FF"></i>Settings</li>
        </a>
        <a href="#logout">
          <li><i class="fas fa-sign-out-alt" style="color: #fff"></i>Logout</li>
        </a>
      </ul>
    </div>

    <div class="content">
      <div class="topbar">
        <button type="button" id="sidebarCollapse" class="menuToggle">
          <i class="fas fa-bars"></i>
          <span></span>
        </button>
        <div class="switchContainer">
          <p>Turn all on</p>
          <label class="switch">
            <input type="checkbox">
            <span class="slider"></span>
          </label>
        </div>
        <div class="groupToggle"><i onclick="toggleLights(this)" class="fas fa-couch"></i></div>
      </div>

      <div class="lightGrid">

        <div class="headline">Groups/Rooms</div>

        {% for object, group in groups.items() %}
        <div class="groupContainer {% if group.state["any_on"] %}textDark{% else %}textLight{% endif %}" id="group_{{ group.id_v1 }}" data-toggle="collapse" data-target="#lights_{{ group.id_v1 }}" aria-expanded="false" aria-controls="lights_{{ group.id_v1 }}">
          <div class="iconContainer">
            <i class="fas fa-lightbulb"></i>
          </div>
          <div class="textContainer">
            <p>{{ group.name }}</p>
            <p class="sub">{% if group.state["any_on"] == False or group.state["all_on"] %}All {{ group.lights|length }}{% endif %} lamps  {% if group.state["any_on"] %}on{% else %}off{% endif %}</p>
          </div>
          <div class="switchContainer">
            <label class="switch">
              <input type="checkbox" {% if group.state["any_on"] %}checked{% endif %}>
              <span class="slider"></span>
            </label>
          </div>
          <div class="slideContainer">
            <input type="range" min="1" max="254" value="{{ group.action["bri"] }}" class="slider">
          </div>
        </div>
        <div class="collapse" id="lights_{{ group.id_v1 }}">
        {% for light in group.lights %}
        <div class="lightContainer {% if light().state["on"] %}textDark{% else %}textLight{% endif %}" id="light_{{ light.id_v1 }}">
          <div class="iconContainer">
            <i class="fas fa-lightbulb"></i>
          </div>
          <div class="textContainer">
          <p>{{ light.name }}</p>
          </div>
          <div class="switchContainer">
            <label class="switch">
              <input type="checkbox" {% if light().state["on"] %}checked{% endif %}>
              <span class="slider"></span>
            </label>
          </div>
          <div class="slideContainer">
          <input type="range" min="1" max="254" value="{{ light().state["bri"] }}" class="slider">
          </div>
        </div>
        {% endfor %}
        <div class="wheel" id="colorPicker_{{ group.id_v1 }}"></div>
        </div>
        {% endfor %}

      </div>
    </div>

</body>
<script>
{% for object, group in groups.items() %}
var colorPicker_{{ group.id_v1 }} = new iro.ColorPicker('#colorPicker_{{ group.id_v1 }}', {
  colors: [
    {% for light in group.lights %}
    {% if  light().state["colormode"] == "xy" %}
      cieToRGB({{ light().state["xy"][0] }}, {{ light().state["xy"][1] }}, 254),
    {% endif %}

    {% endfor %}
  ],
  layout: [
    {
      component: iro.ui.Wheel,
      options: {}
    },
  ]
});
{% endfor %}
</script>

</html>
